<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jp.co.lyc.cms.mapper.TopCustomerInfoMapper">
    <resultMap id="TopCustomerNoSaiBan" type="java.lang.String"/>
    <resultMap id="TopCustomerInfo" type="jp.co.lyc.cms.model.TopCustomerInfoModel"/>
    <!-- 上位お客様番号採番 -->
    <select id="TopCustomerNoSaiBan" resultMap="TopCustomerNoSaiBan">
        SELECT 
        	MAX(TopCustomerNo) AS TopCustomerNoSaiBan
        FROM 
        	T008TopCustomerInfo
    </select>
    <!-- 上位お客様情報検索 -->
    <select id="selectTopCustomerInfo" resultMap="TopCustomerInfo" parameterType="String">
        SELECT 
        	*
        FROM 
        	T008TopCustomerInfo
        WHERE
        	TopCustomerNo = #{topCustomerNo}
    </select>
    <!-- 上位お客様情報インサート -->
    <insert id="insertTopCustomerInfo" parameterType="String">
		INSERT INTO T008TopCustomerInfo 
		VALUE(
		#{topCustomerNo},
		#{topCustomerName},
		#{url},
		#{remark},
		NOW(),
		NOW(),
		#{updateUser})
    </insert>
    <!-- 上位お客様情報アップデート -->
    <update id="updateTopCustomerInfo" parameterType="String">
		UPDATE T008TopCustomerInfo
		SET 
		<if test="TopCustomerName != null">
			TopCustomerName = #{topCustomerName},
		</if>
		<if test="url != null">
			url = #{url},
		</if>	
		<if test="remark != null">
			remark = #{remark},
		</if>			
		updateTime = NOW(),
		updateUser = #{updateUser}
		WHERE 
			TopCustomerNo = #{topCustomerNo}
    </update> 
</mapper>