<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="jp.co.lyc.cms.mapper.WorkRepotMapper">
    <resultMap id="WorkRepot" type="jp.co.lyc.cms.model.WorkRepotModel"/>
    <select id="selectWorkRepot" resultMap="WorkRepot" parameterType="String">
		SELECT
			(@rowNo:=@rowNo + 1) AS rowNo,
			attendanceYearAndMonth,
			workingTimeReport,
			sumWorkTime,
			updateUser,
			updateTime,
			approvalStatus
		FROM 
			workTotalTime
			,(SELECT   @rowNo:=0) AS rowNo
		WHERE
		attendanceRegisterFlag = 0
    </select>
	<update id="updateWorkRepot" parameterType="String">
		UPDATE workTotalTime
		SET 
			approvalStatus = 1
		WHERE 
			employeeNo = #{employeeNo}
			and attendanceYearAndMonth = #{yearAndMonth}
    </update> 
</mapper>